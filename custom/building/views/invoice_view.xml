<?xml version="1.0" encoding="UTF-8"?>
<odoo>

        <record id="building_invoice_tree" model="ir.ui.view">
            <field name="name">building.invoice.tree</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_invoice_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="site_id" optional="show"/>
                </xpath>
                <xpath expr="//list" position="attributes">
                    <attribute name="js_class" />
                </xpath>
                <xpath expr="//list//header" position="inside">
                    <button name="delete_invoice" string="Supprimer" type="object" class="btn btn-danger mx-1" groups="building.group_delete_invoice_dg"/>
                </xpath>
            </field>
        </record>

        <record id="account_move_view_form_confirm_invoice_delete" model="ir.ui.view">
            <field name="name">account.move.view.form.confirm.invoice.delete</field>
            <field name="model">account.move</field>
            <field name="arch" type="xml">
                <form class="confirm_like_modal">
                    <p>Êtes-vous sûr de vouloir supprimer les factures sélectionnées?</p>
                    <footer>
                        <button name="confirm_delete_invoice" type="object" string="Supprimer" class="btn-danger"/>
                        <button string="Annuler" class="btn-secondary" special="cancel"/>
                    </footer>
                </form>
            </field>
        </record>

<!--         <record id="building_invoice_attachment_customer_form" model="ir.ui.view">
            <field name="name">building.attachment.customer.invoice.form</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='partner_id']" position="after">
                    <field name="site_id" domain="[('state', '!=', 'draft')]"/>
                </xpath>
 -->                <!-- <xpath expr="//notebook/page[@id='invoice_tab']/field[@name='invoice_line_ids']/tree/field[@name='quantity']" position="after">
                    <field name="cumulative_quantity" attrs="{'column_invisible': [('parent.invoice_attachment', '=', False)]}"/>
                    <field name="quantity_counts_previous" attrs="{'column_invisible': [('parent.invoice_attachment', '=', False)]}"/>
                    <field name="current_count_quantity" attrs="{'column_invisible': [('parent.invoice_attachment', '=', False)]}"/>
                </xpath>
                <xpath expr="//notebook/page[@id='invoice_tab']/field[@name='invoice_line_ids']/tree/field[@name='price_subtotal']" position="after">
                    <field name="cumulative_price_subtotal" attrs="{'column_invisible': [('parent.invoice_attachment', '=', False)]}"/>
                    <field name="previous_price_subtotal" attrs="{'column_invisible': [('parent.invoice_attachment', '=', False)]}"/>
                    <field name="current_price_subtotal" attrs="{'column_invisible': [('parent.invoice_attachment', '=', False)]}"/>
                </xpath>
                <xpath expr="//field[@name='amount_by_group']" position="after">
                    <field name="cumulative_amount" attrs="{'invisible': [('invoice_attachment', '=', False)]}"/>
                    <field name="amount_previous" attrs="{'invisible': [('invoice_attachment', '=', False)]}"/>
                    <field name="amount_current" attrs="{'invisible': [('invoice_attachment', '=', False)]}"/>
                    <field name="amount_guaranty" attrs="{'invisible': [('invoice_attachment', '=', False)]}"/>
                    <field name="amount_deposit" attrs="{'invisible': [('invoice_attachment', '=', False)]}"/>
                    <field name="amount_assurance" invisible="1"/>
                </xpath> -->
<!--                 <xpath expr="////notebook/page[@id='other_tab']/group/group[@name='sale_info_group']/field[@name='partner_bank_id']" position="after">
                    <field name="invoice_type" invisible="0"/>
                    <field name="categ_invoice" invisible="0"/>
                    <field name="invoice_attachment" invisible="0"/>
                </xpath>
            </field>
        </record>
 -->

    <record id="building_account_view_move_form_inherit" model="ir.ui.view">
        <field name="name">building.account.account.move.inherit</field>
        <field name="model">account.move</field>
        <field name="inherit_id" ref="account.view_move_form"/>
        <field name="arch" type="xml">
            <!-- <xpath expr="//button[@name='action_post'][2]" position="replace">
                <button name="action_post" string="CONFIRMER" class="oe_highlight" type="object" groups="building_account.account_move_confirmed" data-hotkey="v" attrs="{'invisible': ['|', '|', '|', ('state', '!=', 'draft'), ('auto_post', '=', True), ('move_type', '=', 'entry'), ('display_inactive_currency_warning','=',True)]}"/>
            </xpath>

            <xpath expr="//button[@name='action_reverse']" position="replace">
                <button name="action_reverse" string="AJOUTER UN AVOIR" type="object" groups="building_account.account_move_confirmed" attrs="{'invisible': ['|', ('move_type', 'not in', ('out_invoice', 'in_invoice')), ('state', '!=', 'posted')]}"/>
            </xpath>

            <xpath expr="//button[@name='button_draft']" position="replace">
                <button name="button_draft" string="REMETTRE EN BROUILLON" type="object" groups="building_account.account_move_confirmed" attrs="{'invisible' : [('show_reset_to_draft_button', '=', False)]}" data-hotkey="q"/>
            </xpath> -->

            <xpath expr="//field[@name='partner_id']" position="after">
                <field name="site_id" domain="[('state', '!=', 'draft')]" />
                <!-- <field name="vehicle_id"/> -->
                <field name="inv_type" invisible="1"/>
            </xpath>
            <!-- <xpath expr="//field[@name='invoice_incoterm_id']" position="before">
                <field name="prc_advance" attrs="{'invisible': [('inv_type','!=','inv_advance')]}"/>
                <field name="is_caution_gr" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="ref_caution_gr" attrs="{'invisible': [('is_caution_gr', '=', False)]}"/>
                <field name="prc_gr" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="is_caution_advance" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="ref_caution_advance" attrs="{'invisible': [('is_caution_advance', '=', False)]}"/>
                <field name="prc_advance_deduction" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="is_caution_all_risk_site_insurance" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="ref_caution_all_risk_site_insurance" attrs="{'invisible': [('is_caution_all_risk_site_insurance', '=', False)]}"/>
                <field name="prc_all_risk_site_insurance" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="is_caution_prorata_account" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="ref_caution_prorata_account" attrs="{'invisible': [('is_caution_prorata_account', '=', False)]}"/>
                <field name="prc_prorata_account" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="is_caution_finish" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="ref_caution_finish" attrs="{'invisible': [('is_caution_finish', '=', False)]}"/>
                <field name="prc_finish" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="is_caution_ten_year" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="ref_caution_ten_year" attrs="{'invisible': [('is_caution_ten_year', '=', False)]}"/>
                <field name="prc_ten_year" attrs="{'invisible': [('inv_type','not in',('inv_attachment', 'inv_supply'))]}"/>
                <field name="is_inv_reprise"/>
            </xpath> -->
            <!-- <xpath expr="//field[@name='amount_untaxed']" position="replace">
                <field name="tax_totals_json" widget="account-tax-totals-field" nolabel="1" colspan="2" attrs="{'invisible': [('inv_type','in', ('inv_attachment'))]}"/>
                <field name="amount_untaxed" nolabel="0" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_tax_before_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_total_before_deduction" nolabel="0" class="oe_subtotal_footer_separator" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_advance_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_deduction_gr" nolabel="0" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_prorata_account_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_all_risk_site_insurance_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_ten_year" nolabel="0" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_finish_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_total" nolabel="0" class="oe_subtotal_footer_separator" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
                <field name="amount_tax" nolabel="0" string="Dont TVA à 20%" attrs="{'invisible': [('inv_type','not in', ('inv_attachment'))]}"/>
            </xpath> -->

            <xpath expr="//field[@name='line_ids']/list/field[@name='debit']" position="after">
                <!-- <field name="debit_after_deduction" string="Débit" sum="Total Debit" attrs="{'invisible': [('display_type', 'in', ('line_section', 'line_note'))], 'column_invisible': [('parent.inv_type', 'not in', ('inv_attachment', 'inv_advance'))]}" invisible="1"/> -->
                <!-- <field name="exclude_from_invoice_tab" invisible="1"/> -->
                <field name="is_building_specific" invisible="1"/>
            </xpath>

            <xpath expr="//field[@name='invoice_date_due']" position="replace">
                <field name="invoice_date_due" force_save="1" readonly="1"/>
            </xpath>

            <!-- <xpath expr="//span[@class='o_form_label mx-3 oe_edit_only']" position="replace">
                <span class="o_form_label mx-3">  </span>
            </xpath> -->

            <!-- <xpath expr="//page[@id='invoice_tab']" position="before">
                <page id="invoice_enter_tab"
                      string="Lignes de facture"
                      attrs="{'invisible': ['|', ('move_type', '=', 'entry'), ('inv_type','not in',('inv_attachment'))]}">
                    <field name="invoice_line_enter_ids"
                           widget="section_and_note_one2many"
                           mode="tree"
                           context="{'default_move_type': context.get('default_move_type'), 'journal_id': journal_id, 'default_partner_id': commercial_partner_id, 'default_currency_id': currency_id or company_currency_id}">
                        <tree editable="bottom" string="Journal Items" default_order="sequence, date desc, move_name desc, id">
                            <control>
                                <create name="add_line_control" string="Ajouter une ligne"/>
                                <create name="add_section_control" string="Ajouter une section" context="{'default_display_type': 'line_section'}"/>
                                <create name="add_note_control" string="Ajouter une note" context="{'default_display_type': 'line_note'}"/>
                            </control>

                            <field name="sequence" widget="handle"/>
                            <field name="move_name" invisible="1"/>
                            <field name="product_id"
                                   optional="show"
                                   domain="
                                        context.get('default_move_type') in ('out_invoice', 'out_refund', 'out_receipt')
                                        and [('sale_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]
                                        or [('purchase_ok', '=', True), '|', ('company_id', '=', False), ('company_id', '=', parent.company_id)]
                                   "/>
                            <field name="name" widget="section_and_note_text" attrs="{'required': [('parent.move_type', 'not in', ('in_invoice', 'in_refund','in_receipt'))]}"/>
                            <field name="account_id"
                                   groups="account.group_account_readonly"
                                   options="{'no_create': True}"
                                   domain="[('deprecated', '=', False), ('user_type_id.type', 'not in', ('receivable', 'payable')), ('company_id', '=', parent.company_id), ('is_off_balance', '=', False)]"
                                   attrs="{'required': [('display_type', '=', False)]}"/>
                            <field name="cumulative_quantity" invisible="1"/>
                            <field name="quantity_counts_previous" invisible="1"/>
                            <field name="current_count_quantity" invisible="1"/>
                            <field name="quantity"/>
                            <field name="product_uom_category_id" invisible="1"/>
                            <field name="product_uom_id" string="UoM" groups="uom.group_uom" optional="show"/>
                            <field name="cumulative_price_unit" string="Prix" invisible="1"/>
                            <field name="previous_price_unit" string="Prix" invisible="1"/>
                            <field name="current_price_unit" string="Prix" invisible="1"/>
                            <field name="price_unit" string="Prix"/>
                            <field name="discount" string="Rem.%" optional="hide"/>
                            <field name="tax_ids" widget="many2many_tags"
                                               domain="[('type_tax_use', '=?', parent.invoice_filter_type_domain), ('company_id', '=', parent.company_id)]"
                                               context="{'append_type_to_tax_name': not parent.invoice_filter_type_domain}"
                                               options="{'no_create': True}"
                                               optional="show"/>
                            <field name="price_subtotal"
                                   string="Sous-total"
                                   groups="account.group_show_line_subtotals_tax_excluded" force_save="1"/>
                            <field name="price_total"
                                   string="Total"
                                   groups="account.group_show_line_subtotals_tax_included"/>

                            <field name="partner_id" invisible="1"/>
                            <field name="currency_id" invisible="1"/>
                            <field name="date" invisible="1"/>
                            <field name="company_id" invisible="1"/>
                            <field name="company_currency_id" invisible="1"/>
                            <field name="display_type" force_save="1" invisible="1"/>
                        </tree>
                    </field>
                    <group col="12" class="oe_invoice_lines_tab">
                        <group colspan="8">
                            <field name="narration" placeholder="Terms and Conditions" class="oe_inline" nolabel="1"/>
                        </group>
                        <group colspan="4">
                            <group class="oe_subtotal_footer oe_right"
                                attrs="{'invisible': ['|', '|', ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')),
                                                           ('payment_state' ,'=', 'invoicing_legacy'),('inv_type','not in',('inv_attachment'))]}">

                                <field name="amount_untaxed_before_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_tax_before_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_total_before_deduction" nolabel="0" class="oe_subtotal_footer_separator" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_advance_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_deduction_gr" nolabel="0" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_prorata_account_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_all_risk_site_insurance_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_ten_year" nolabel="0" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_finish_deduction" nolabel="0" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_untaxed" nolabel="0" class="oe_subtotal_footer_separator" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}" invisible="1"/>
                                <field name="amount_total" nolabel="0" class="oe_subtotal_footer_separator" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                                <field name="amount_tax" nolabel="0" string="Dont TVA à 20%" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}" invisible="1"/>
                                <field name="invoice_payments_widget" colspan="2" nolabel="1" widget="payment"/>
                                <field name="amount_residual" class="oe_subtotal_footer_separator" attrs="{'invisible': [('state', '=', 'draft')]}"/>
                            </group>
                            <field name="invoice_outstanding_credits_debits_widget"
                                class="oe_invoice_outstanding_credits_debits"
                                colspan="2" nolabel="1" widget="payment"
                                attrs="{'invisible': ['|', ('state', '!=', 'posted'), ('move_type', 'in', ('out_receipt', 'in_receipt'))]}"/>
                        </group>
                        <group class="oe_subtotal_footer oe_right"
                                    attrs="{'invisible': ['|', '|', ('move_type', 'not in', ('out_invoice', 'out_refund', 'in_invoice', 'in_refund', 'out_receipt', 'in_receipt')),
                                                               ('payment_state' ,'=', 'invoicing_legacy'), ('inv_type', 'in', ('inv_attachment'))]}">
                                    <field name="amount_tax" invisible="0"/>
                                    <field name="amount_untaxed" attrs="{'invisible': [('amount_tax', '=', 0)]}"/>
                                    <field name="amount_by_group" widget="tax-group-custom-field" nolabel="1" colspan="2" attrs="{'invisible': [('amount_tax', '=', 0)]}"/>
                                    <field name="amount_total" attrs="{'invisible': [('amount_tax', '!=', 0)]}"/>
                                    <field name="amount_total" class="oe_subtotal_footer_separator" attrs="{'invisible': [('amount_tax', '=', 0)]}"/>
                                    <field name="invoice_payments_widget" colspan="2" nolabel="1" widget="payment"/>
                                    <field name="amount_residual" class="oe_subtotal_footer_separator" attrs="{'invisible': [('state', '=', 'draft')]}"/>
                        </group>
                    </group>
                </page>
            </xpath> -->
            <!-- <xpath expr="//page[@id='invoice_tab']" position="attributes">
                <attribute name="attrs">{'invisible': [('inv_type', 'in', ('inv_attachment'))]}</attribute>
            </xpath> -->
            <xpath expr="////notebook/page[@id='other_tab']/group/group[@name='sale_info_group']/field[@name='partner_bank_id']" position="after">
                <field name="invoice_type" invisible="0"/>
                <field name="categ_invoice" invisible="0"/>
                <field name="invoice_attachment" invisible="0"/>
            </xpath>

            <!-- <xpath expr="//page[@id='other_tab']" position="before">
                <page string="Taux Déductions" name="ded_invoice" attrs="{'invisible': [('inv_type', 'not in', ('inv_attachment'))]}">
                    <group>
                        <field name="is_caution_gr" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="ref_caution_gr" attrs="{'invisible': [('is_caution_gr', '=', False)]}"/>
                        <field name="prc_gr" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="is_caution_advance" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="ref_caution_advance" attrs="{'invisible': [('is_caution_advance', '=', False)]}"/>
                        <field name="prc_advance_deduction" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="is_caution_all_risk_site_insurance" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="ref_caution_all_risk_site_insurance" attrs="{'invisible': [('is_caution_all_risk_site_insurance', '=', False)]}"/>
                        <field name="prc_all_risk_site_insurance" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="is_caution_prorata_account" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="ref_caution_prorata_account" attrs="{'invisible': [('is_caution_prorata_account', '=', False)]}"/>
                        <field name="prc_prorata_account" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="is_caution_ten_year" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="ref_caution_ten_year" attrs="{'invisible': [('is_caution_ten_year', '=', False)]}"/>
                        <field name="prc_ten_year" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="is_caution_finish" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                        <field name="ref_caution_finish" attrs="{'invisible': [('is_caution_finish', '=', False)]}"/>
                        <field name="prc_finish" attrs="{'invisible': [('inv_type','not in',('inv_attachment'))]}"/>
                     </group>
                </page>
                <page string="Cumuls" name="cumul_invoice" attrs="{'invisible': [('inv_type', 'not in', ('inv_attachment'))]}">
                    <group string="Déductions précédents">
                        <field name="prev_amount_deduction_gr" string="Déd Ret Garantie"/>
                        <field name="prev_amount_advance_deduction" string="Déd Avance"/>
                        <field name="prev_amount_all_risk_site_insurance_deduction" string="Déd Ass TRC"/>
                        <field name="prev_amount_prorata_account_deduction" string="Déd Ret Prorata"/>
                        <field name="prev_amount_ten_year" string="Déd Ret décennale"/>
                        <field name="prev_amount_finish_deduction" string="Déd Autres Ret"/>
                     </group>
                    <group string="Cumul Facture">
                        <field name="cumul_amount_untaxed" />
                        <field name="cumul_amount_deduction_gr" string="Déd Ret Garantie"/>
                        <field name="cumul_amount_advance_deduction" string="Déd Avance" />
                        <field name="cumul_amount_all_risk_site_insurance_deduction" string="Déd Ass TRC"/>
                        <field name="cumul_amount_prorata_account_deduction" string="Déd Ret Prorata"/>
                        <field name="cumul_amount_ten_year" string="Déd Ret décennale"/>
                        <field name="cumul_amount_finish_deduction" string="Déd Autres Ret"/>
                        <field name="cumul_amount_untaxed_after_ded_ret" string="HT aprés Déd"/>
                        <field name="prev_amount_previous_inv_attachment_deduction" string="Déc. précédents"/>
                        <field name="cumul_amount_untaxed_after_ded_prev_inv"/>
                        <field name="cumul_amount_tax"/>
                        <field name="cumul_amount_total" />
                     </group>
                </page>
            </xpath> -->
        </field>

    </record>

        <record model="ir.ui.view" id="view_account_invoice_filter_inherit1">
            <field name="name">account.invoice.select.inherit1</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="arch" type="xml">
                <xpath expr="//filter[@name='salesperson']" position="after">
                    <filter name="sitegroup" string='Affaire' context="{'group_by' : 'site_id'}"/>
                    <filter name="ordergroup" string='BP' context="{'group_by' : 'order_id'}"/>
                    <filter name='dateduegroup' string="Date d'échéance" context="{'group_by':'invoice_date_due'}"/>
                    <filter name="group_by_partner_id" string="Partenaire" context="{'group_by':'partner_id'}"/>
                </xpath>
                <xpath expr="//filter[@name='duedate']" position="replace">
                </xpath>
            </field>
        </record>

        <record id="action_building_invoice_advance_tree" model="ir.actions.act_window">
            <field name="name">Acomptes</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">list,kanban,form</field>
            <field name="view_id" ref="account.view_out_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'out_invoice'), ('invoice_type', '=', 'specific'), ('invoice_advance', '=', True), ('invoice_attachment', '=', False)]</field>
            <field name="context">{'default_move_type': 'out_invoice', 'move_type':'out_invoice', 'journal_type': 'sale','invoice_type':'specific'}</field>
        </record>

        <record id="action_building_invoice_attachment_customer_tree" model="ir.actions.act_window">
            <field name="name">Factures Attachements</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">list,kanban,form</field>
            <field name="view_id" ref="account.view_out_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'out_invoice'), ('invoice_type', '=', 'specific'), ('invoice_advance','=',False), ('invoice_attachment','=',True)]</field>
            <field name="context">{'default_move_type':'out_invoice', 'move_type':'out_invoice', 'journal_type': 'sale', 'invoice_type':'specific'}</field>
        </record>

        <record id="action_building_invoice_issued_customer_tree" model="ir.actions.act_window">
            <field name="name">Factures Émises</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">list</field>
            <field name="view_id" ref="account.view_out_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'out_invoice'), ('invoice_date_due', '&gt;', time.strftime('%Y-%m-%d')), ('payment_state', '=', 'not_paid')]</field>
            <field name="context">{'default_move_type':'out_invoice', 'journal_type': 'sale'}</field>
        </record>

        <record id="action_building_due_invoice_customer_tree" model="ir.actions.act_window">
            <field name="name">Factures Échues</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">list</field>
            <field name="view_id" ref="account.view_out_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'out_invoice'), ('invoice_date_due', '&lt;=', time.strftime('%Y-%m-%d')), ('payment_state', '=', 'not_paid')]</field>
            <field name="context">{'default_move_type': 'out_invoice', 'journal_type': 'sale'}</field>
        </record>

        <record id="building_invoice_supplier_tree" model="ir.ui.view">
            <field name="name">building.invoice.supplier.tree</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_in_invoice_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="site_id" optional="show"/>
                </xpath>
            </field>
        </record>

        <record id="view_in_invoice_tree_herit" model="ir.ui.view">
            <field name="name">view_in_invoice_tree_herit</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_in_invoice_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//list" position="attributes">
                    <attribute name="js_class" />
                </xpath>
                <!-- <xpath expr="//tree" position="attributes">
                    <attribute name="create">false</attribute>
                </xpath> -->
            </field>
        </record>


        <record id="action_building_invoice_attachment_supplier_tree" model="ir.actions.act_window">
            <field name="name">Factures Attachements</field>
            <field name="res_model">account.move</field>
            <field name="view_id" ref="account.view_in_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="view_mode">list,kanban,form</field>
            <field name="domain">[('move_type', '=', 'in_invoice'), ('invoice_type', '=', 'specific'), ('invoice_advance', '=', False), ('invoice_attachment', '=', True)]</field>
            <field name="context">{'default_move_type':'in_invoice', 'move_type':'in_invoice', 'journal_type': 'purchase', 'invoice_type':'specific'}</field>
        </record>

        <record id="action_building_invoice_supplier_other_tree" model="ir.actions.act_window">
            <field name="name">Factures Divers</field>
            <field name="res_model">account.move</field>
            <field name="view_id" ref="account.view_in_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="view_mode">list,kanban,form</field>
            <field name="domain">[('move_type', '=', 'in_invoice'), ('invoice_type', '=', 'specific'), ('invoice_attachment', '=', False)]</field>
            <field name="context">{'default_move_type': 'in_invoice', 'move_type': 'in_invoice', 'journal_type': 'purchase', 'invoice_type': 'specific'}</field>
        </record>

        <record id="action_building_invoice_supplier_advance_tree" model="ir.actions.act_window">
            <field name="name">Acomptes</field>
            <field name="res_model">account.move</field>
            <field name="view_id" ref="account.view_in_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="view_mode">list,kanban,form</field>
            <field name="domain">[('move_type', '=',' in_invoice'), ('invoice_type', '=', 'specific'), ('invoice_advance','=',True)]</field>
            <field name="context">{'default_move_type': 'in_invoice', 'move_type': 'in_invoice', 'journal_type': 'purchase', 'invoice_type': 'specific'}</field>
        </record>

        <record id="action_invoice_supplier_due_tree" model="ir.actions.act_window">
            <field name="name">Factures à payer par mois</field>
            <field name="res_model">account.move</field>
            <field name="view_mode">list</field>
            <field name="view_id" ref="account.view_out_invoice_tree"/>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="domain">[('move_type', '=', 'in_invoice'), ('payment_state', '=', 'not_paid')]</field>
            <field name="search_view_id" ref="account.view_account_invoice_filter"/>
            <field name="context">{'search_default_sitegroup': 1, 'search_default_dateduegroup':1, 'search_default_group_by_partner_id':1, 'search_default_unpaid':1, 'default_move_type':'in_invoice', 'move_type':'in_invoice', 'journal_type': 'purchase'}</field>
        </record>

        <record id="building_move_inherit_tree" model="ir.ui.view">
            <field name="name">building.move.inherit.tree</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='name']" position="after">
                    <field name="site_id" optional="show"/>
                </xpath>
                <xpath expr="//field[@name='site_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='partner_id']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>
            </field>
        </record>

        <record id="building_view_move_line_tree_inherit" model="ir.ui.view">
            <field name="name">build.account.move.line.tree.inherit</field>
            <field name="model">account.move.line</field>
            <field name="inherit_id" ref="account.view_move_line_tree"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='move_id']" position="after">
                    <field name="site_id" optional="show"/>
                </xpath>
            </field>
        </record>

        <record id="account_caution_form_inherit" model="ir.ui.view">
            <field name="name">account.caution.form.inherit</field>
            <field name="model">account.caution</field>
            <field name="inherit_id" ref="crm_igaser.account_caution_view"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='opp_id']" position="after">
                    <field name="site_id" readonly="state_caution in ('caution_diposed', 'released', 'retrieved_caution')" invisible="type_caution == 'tender_caution'" domain="[('state', '=', 'open')]" force_save="1"/>
                </xpath>
            </field>
        </record>


</odoo>
